services:
  schwab_content_sync.exporter:
    class: Drupal\schwab_content_sync\ContentExporter
    arguments:
      - '@entity_type.manager'
      - '@module_handler'
      - '@messenger'
      - '@language_manager'
      - '@schwab_content_sync.helper'
      - '@entity.repository'
      - '@plugin.manager.schwab_content_sync_field_processor'
      - '@plugin.manager.schwab_content_sync_base_fields_processor'
      - '@event_dispatcher'

  schwab_content_sync.importer:
    class: Drupal\schwab_content_sync\ContentImporter
    arguments:
      - '@entity_type.manager'
      - '@entity.repository'
      - '@module_handler'
      - '@file_system'
      - '@schwab_content_sync.helper'
      - '@datetime.time'
      - '@plugin.manager.schwab_content_sync_field_processor'
      - '@plugin.manager.schwab_content_sync_base_fields_processor'
      - '@event_dispatcher'
      - '@stream_wrapper_manager'

  schwab_content_sync.file_generator:
    class: Drupal\schwab_content_sync\ContentFileGenerator
    arguments:
      - '@file_system'
      - '@schwab_content_sync.helper'
      - '@schwab_content_sync.exporter'
      - '@schwab_content_sync.store'

  schwab_content_sync.helper:
    class: Drupal\schwab_content_sync\ContentSyncHelper
    arguments:
      - '@uuid'
      - '@file_system'
      - '@file.repository'
      - '@plugin.manager.archiver'
      - '@entity_type.manager'
      - '@config.factory'
      - '@entity.repository'
      - '@entity_type.bundle.info'

  schwab_content_sync.store:
    class: \Drupal\Core\TempStore\PrivateTempStore
    factory: ['@tempstore.private', 'get']
    arguments: [schwab_content_sync]

  plugin.manager.schwab_content_sync_field_processor:
    class: Drupal\schwab_content_sync\SchwabContentSyncFieldProcessorPluginManager
    parent: default_plugin_manager
    arguments:
      - '@entity_field.manager'

  plugin.manager.schwab_content_sync_base_fields_processor:
    class: Drupal\schwab_content_sync\SchwabContentSyncBaseFieldsProcessorPluginManager
    parent: default_plugin_manager
    arguments:
      - '@entity_type.manager'

      - '@schwab_content_sync.helper'
      - '@file_system'
      - '@entity.repository'
      - '%app.root%'
